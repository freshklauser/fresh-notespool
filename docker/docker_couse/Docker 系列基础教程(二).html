<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 9.0.4 (457911)"/><meta name="created" content="2018-08-09 01:06:29 +0000"/><meta name="source" content="maxiang"/><meta name="source-application" content="maxiang"/><meta name="updated" content="2018-08-22 01:19:13 +0000"/><meta name="content-class" content="maxiang"/><title>Docker 系列基础教程(二)</title></head><body lang="v2" style="color: #2c3f51; font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, Song, sans-serif; line-height: 1.6; background: none;"><del style="position:relative;display:block;z-index:10;"><a style="position: absolute;color: #FFF;text-decoration: none;font-size: 12px;height: 25px;border-radius: 0;margin-top: -20px;right: 15px;background: rgba(0, 0, 0, 0);border-left: 10px solid #BB3A34;border-right: 10px solid #BB3A34;border-bottom: 5px solid rgba(0, 0, 0, 0);width: 0;text-indent:-100000px;" href="http://maxiang.info/#/?provider=evernote&amp;guid=15ee863d-6b3a-4cff-9bc3-c1f4d3c9cf02&amp;notebook=Docker">Edit</a></del><div style="color: #2c3f51; font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, Song, sans-serif; line-height: 1.6;">
                        
                    

<div style="line-height: 1.6;"><div style="line-height: 1.6;"><div style="line-height: 1.6;">
<ul style="margin-top: 0; margin-bottom: 15px; list-style-type: none; line-height: 1.6;">
<li style="line-height: 1.6;"><ul style="margin-top: 0; margin-bottom: 15px; list-style-type: none; line-height: 1.6;">
<li style="line-height: 1.6;"><a href="#docker-系列基础教程二" style="background: transparent; color: #1980e6; text-decoration: none;">Docker 系列基础教程(二)</a><ul style="margin-top: 0; margin-bottom: 15px; list-style-type: none; line-height: 1.6;">
<li style="line-height: 1.6;"><a href="#centos-7-安装-docker-ce-社区版本" style="background: transparent; color: #1980e6; text-decoration: none;">CentOs 7 安装 Docker-ce 社区版本</a><ul style="margin-top: 0; margin-bottom: 15px; list-style-type: none; line-height: 1.6;">
<li style="line-height: 1.6;"><a href="#安装docker依赖包" style="background: transparent; color: #1980e6; text-decoration: none;">安装docker依赖包</a></li>
<li style="line-height: 1.6;"><a href="#添加docker-ce-软件源" style="background: transparent; color: #1980e6; text-decoration: none;">添加Docker-ce 软件源</a></li>
<li style="line-height: 1.6;"><a href="#关闭docker-ce-的边缘版本和测试版本" style="background: transparent; color: #1980e6; text-decoration: none;">关闭Docker-ce 的边缘版本和测试版本</a></li>
<li style="line-height: 1.6;"><a href="#更新yum源" style="background: transparent; color: #1980e6; text-decoration: none;">更新yum源</a></li>
<li style="line-height: 1.6;"><a href="#安装docker-ce第一种安装方式" style="background: transparent; color: #1980e6; text-decoration: none;">安装Docker-ce（第一种安装方式）</a></li>
<li style="line-height: 1.6;"><a href="#查看是否安装成功" style="background: transparent; color: #1980e6; text-decoration: none;">查看是否安装成功</a></li>
<li style="line-height: 1.6;"><a href="#查看可以提供的安装版本第二种安装方式" style="background: transparent; color: #1980e6; text-decoration: none;">查看可以提供的安装版本（第二种安装方式）</a></li>
<li style="line-height: 1.6;"><a href="#安装指定版本的docker-ce" style="background: transparent; color: #1980e6; text-decoration: none;">安装指定版本的Docker-ce</a></li>
<li style="line-height: 1.6;"><a href="#使用docker-脚本安装docker第三种方式" style="background: transparent; color: #1980e6; text-decoration: none;">使用Docker 脚本安装Docker（第三种方式）</a><ul style="margin-top: 0; margin-bottom: 15px; list-style-type: none; line-height: 1.6;">
<li style="line-height: 1.6;"><a href="#下载docker-安装脚本" style="background: transparent; color: #1980e6; text-decoration: none;">下载Docker 安装脚本</a></li>
<li style="line-height: 1.6;"><a href="#执行-docker-脚本使用-aliyun-镜像" style="background: transparent; color: #1980e6; text-decoration: none;">执行 Docker 脚本使用 aliyun 镜像</a></li>
</ul>
</li>
</ul>
</li>
<li style="line-height: 1.6;"><a href="#更换docker-镜像仓库为国内镜像源" style="background: transparent; color: #1980e6; text-decoration: none;">更换Docker 镜像仓库为国内镜像源</a><ul style="margin-top: 0; margin-bottom: 15px; list-style-type: none; line-height: 1.6;">
<li style="line-height: 1.6;"><a href="#注册daocloud账号并登陆daocloud" style="background: transparent; color: #1980e6; text-decoration: none;">注册Daocloud账号，并登陆Daocloud</a></li>
<li style="line-height: 1.6;"><a href="#执行更换daocloud-国内镜像源命令" style="background: transparent; color: #1980e6; text-decoration: none;">执行更换Daocloud 国内镜像源命令</a></li>
<li style="line-height: 1.6;"><a href="#重启docker-使国内源生效" style="background: transparent; color: #1980e6; text-decoration: none;">重启Docker 使国内源生效</a></li>
<li style="line-height: 1.6;"><a href="#添加docker-为随机启动" style="background: transparent; color: #1980e6; text-decoration: none;">添加Docker 为随机启动</a></li>
</ul>
</li>
<li style="line-height: 1.6;"><a href="#docker-镜像的基础操作" style="background: transparent; color: #1980e6; text-decoration: none;">Docker 镜像的基础操作</a><ul style="margin-top: 0; margin-bottom: 15px; list-style-type: none; line-height: 1.6;">
<li style="line-height: 1.6;"><ul style="margin-top: 0; margin-bottom: 15px; list-style-type: none; line-height: 1.6;">
<li style="line-height: 1.6;"><a href="#从github-拉取-镜像" style="background: transparent; color: #1980e6; text-decoration: none;">从github 拉取 镜像</a></li>
<li style="line-height: 1.6;"><a href="#列出本地已下载的镜像" style="background: transparent; color: #1980e6; text-decoration: none;">列出本地已下载的镜像</a></li>
<li style="line-height: 1.6;"><a href="#删除本地镜像" style="background: transparent; color: #1980e6; text-decoration: none;">删除本地镜像</a></li>
</ul>
</li>
</ul>
</li>
<li style="line-height: 1.6;"><a href="#使用dockerfile构建自己的镜像" style="background: transparent; color: #1980e6; text-decoration: none;">使用Dockerfile构建自己的镜像</a><ul style="margin-top: 0; margin-bottom: 15px; list-style-type: none; line-height: 1.6;">
<li style="line-height: 1.6;"><a href="#创建一个空白的目录并进入此目录" style="background: transparent; color: #1980e6; text-decoration: none;">创建一个空白的目录并进入此目录</a></li>
<li style="line-height: 1.6;"><a href="#上传定制镜像需要的文件到此目录下" style="background: transparent; color: #1980e6; text-decoration: none;">上传定制镜像需要的文件到此目录下</a></li>
<li style="line-height: 1.6;"><a href="#编辑dockerfile文件" style="background: transparent; color: #1980e6; text-decoration: none;">编辑Dockerfile文件</a></li>
<li style="line-height: 1.6;"><a href="#构建镜像" style="background: transparent; color: #1980e6; text-decoration: none;">构建镜像</a></li>
<li style="line-height: 1.6;"><a href="#查看构建成功的images" style="background: transparent; color: #1980e6; text-decoration: none;">查看构建成功的images</a></li>
<li style="line-height: 1.6;"><a href="#运行新构建的images" style="background: transparent; color: #1980e6; text-decoration: none;">运行新构建的images</a></li>
<li style="line-height: 1.6;"><a href="#访问8080验证镜像是否制作成功" style="background: transparent; color: #1980e6; text-decoration: none;">访问8080，验证镜像是否制作成功</a></li>
</ul>
</li>
<li style="line-height: 1.6;"><a href="#遇到的问题" style="background: transparent; color: #1980e6; text-decoration: none;">遇到的问题</a><ul style="margin-top: 0; margin-bottom: 15px; list-style-type: none; line-height: 1.6;">
<li style="line-height: 1.6;"><a href="#1-docker-build-报错warning-ipv4-forwarding-is-disabled-networking-will-not-work" style="background: transparent; color: #1980e6; text-decoration: none;">1. docker build 报错[Warning] IPv4 forwarding is disabled. Networking will not work.</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
</div>



<h2 style="font-family: inherit; font-weight: bold; line-height: 1.1; color: inherit; margin-top: 21px; margin-bottom: 10.5px; font-size: 34.4px; margin: 1.2em 0 .6em 0; text-align: start;"><a name="docker-系列基础教程二" style="background: transparent; color: #1980e6; text-decoration: none;"/>Docker 系列基础教程(二)</h2>

<p style="margin: 0 0 1.1em; line-height: 1.6;"/><p style="margin: 0 0 1.1em; color: rgba(44,63,81,0.3); line-height: 1.6;"><code style="font-family: 'Source Code Pro',Consolas,monospace; font-size: .9em; background-color: #f9f2f4; white-space: normal; padding: 2px 5px; border-radius: 0; color: #fff; background: rgba(44,63,81,0.3); margin-right: 6px;">Docker</code> </p><p style="margin: 0 0 1.1em; line-height: 1.6;"/>



<h3 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 21px; margin-bottom: 10.5px; font-size: 27.2px; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;"><a name="centos-7-安装-docker-ce-社区版本" style="background: transparent; color: #1980e6; text-decoration: none;"/>CentOs 7 安装 Docker-ce 社区版本</h3>



<h4 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 10.5px; margin-bottom: 10.5px; font-size: 20px; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;"><a name="安装docker依赖包" style="background: transparent; color: #1980e6; text-decoration: none;"/>安装docker依赖包</h4>

<pre style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; display: block; font-size: .9em; word-wrap: break-word; color: #333; background-color: rgba(102,128,153,0.05); text-align: start; padding: 0; margin: 0 0 1.1em; line-height: 1.6; border: 0; border-radius: 5px; word-break: break-all;"><code style="font-family: 'Source Code Pro',Consolas,monospace; font-size: inherit; background-color: transparent; white-space: pre-wrap; border-radius: 0; color: #333; display: block; overflow-x: auto; background: #f8f8f8; padding: 1.3em 2em;"><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #900; font-weight: bold; background-color: transparent;">yum</span> install -y yum-utils device-mapper-persistent-<span style="display: inline; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">data</span> lvm2</span>
</div></code></pre>



<h4 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 10.5px; margin-bottom: 10.5px; font-size: 20px; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;"><a name="添加docker-ce-软件源" style="background: transparent; color: #1980e6; text-decoration: none;"/>添加Docker-ce 软件源</h4>

<pre style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; display: block; font-size: .9em; word-wrap: break-word; color: #333; background-color: rgba(102,128,153,0.05); text-align: start; padding: 0; margin: 0 0 1.1em; line-height: 1.6; border: 0; border-radius: 5px; word-break: break-all;"><code style="font-family: 'Source Code Pro',Consolas,monospace; font-size: inherit; background-color: transparent; white-space: pre-wrap; border-radius: 0; color: #333; display: block; overflow-x: auto; background: #f8f8f8; padding: 1.3em 2em;"><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">yum-config-manager --<span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">add</span>-repo http<span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">s:</span>//download.docker.<span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">com</span>/linux/centos/docker-<span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">ce</span>.repo
</div></code></pre>



<h4 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 10.5px; margin-bottom: 10.5px; font-size: 20px; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;"><a name="关闭docker-ce-的边缘版本和测试版本" style="background: transparent; color: #1980e6; text-decoration: none;"/>关闭Docker-ce 的边缘版本和测试版本</h4>

<pre style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; display: block; font-size: .9em; word-wrap: break-word; color: #333; background-color: rgba(102,128,153,0.05); text-align: start; padding: 0; margin: 0 0 1.1em; line-height: 1.6; border: 0; border-radius: 5px; word-break: break-all;"><code style="font-family: 'Source Code Pro',Consolas,monospace; font-size: inherit; background-color: transparent; white-space: pre-wrap; border-radius: 0; color: #333; display: block; overflow-x: auto; background: #f8f8f8; padding: 1.3em 2em;"><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">yum-<span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">config</span>-manager <span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;">--enable docker-ce-edge</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">yum-<span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">config</span>-manager <span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;">--enable docker-ce-test</span>
</div></code></pre>



<h4 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 10.5px; margin-bottom: 10.5px; font-size: 20px; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;"><a name="更新yum源" style="background: transparent; color: #1980e6; text-decoration: none;"/>更新yum源</h4>

<pre style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; display: block; font-size: .9em; word-wrap: break-word; color: #333; background-color: rgba(102,128,153,0.05); text-align: start; padding: 0; margin: 0 0 1.1em; line-height: 1.6; border: 0; border-radius: 5px; word-break: break-all;"><code style="font-family: 'Source Code Pro',Consolas,monospace; font-size: inherit; background-color: transparent; white-space: pre-wrap; border-radius: 0; color: #333; display: block; overflow-x: auto; background: #f8f8f8; padding: 1.3em 2em;"><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #000080; font-weight: normal; background-color: transparent;">yum makecache fast</span>
</div></code></pre>



<h4 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 10.5px; margin-bottom: 10.5px; font-size: 20px; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;"><a name="安装docker-ce第一种安装方式" style="background: transparent; color: #1980e6; text-decoration: none;"/>安装Docker-ce（第一种安装方式）</h4>

<pre style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; display: block; font-size: .9em; word-wrap: break-word; color: #333; background-color: rgba(102,128,153,0.05); text-align: start; padding: 0; margin: 0 0 1.1em; line-height: 1.6; border: 0; border-radius: 5px; word-break: break-all;"><code style="font-family: 'Source Code Pro',Consolas,monospace; font-size: inherit; background-color: transparent; white-space: pre-wrap; border-radius: 0; color: #333; display: block; overflow-x: auto; background: #f8f8f8; padding: 1.3em 2em;"><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">yum <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">install</span> docker-ce -y
</div></code></pre>



<h4 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 10.5px; margin-bottom: 10.5px; font-size: 20px; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;"><a name="查看是否安装成功" style="background: transparent; color: #1980e6; text-decoration: none;"/>查看是否安装成功</h4>

<pre style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; display: block; font-size: .9em; word-wrap: break-word; color: #333; background-color: rgba(102,128,153,0.05); text-align: start; padding: 0; margin: 0 0 1.1em; line-height: 1.6; border: 0; border-radius: 5px; word-break: break-all;"><code style="font-family: 'Source Code Pro',Consolas,monospace; font-size: inherit; background-color: transparent; white-space: pre-wrap; border-radius: 0; color: #333; display: block; overflow-x: auto; background: #f8f8f8; padding: 1.3em 2em;"><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">docker version
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #990073; background-color: transparent;"/>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #990073; background-color: transparent;">Client:</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #d14; background-color: transparent;">Version:</span>           <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">18.06</span><span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">.1</span>-ce-rc1
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">API <span style="display: inline; line-height: 1.6; color: #d14; background-color: transparent;">version:</span>       <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">1.38</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">Go <span style="display: inline; line-height: 1.6; color: #d14; background-color: transparent;">version:</span>        go1<span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">.10</span><span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">.3</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">Git <span style="display: inline; line-height: 1.6; color: #d14; background-color: transparent;">commit:</span>        <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">0928140</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #d14; background-color: transparent;">Built:</span>             Wed Aug  <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">8</span> <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">01</span>:<span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">35</span>:<span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">58</span> <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">2018</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">OS<span style="display: inline; line-height: 1.6; color: #009926; background-color: transparent;">/Arch:           linux/</span>amd64
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #d14; background-color: transparent;">Experimental:</span>      <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">false</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">Cannot connect to the Docker daemon at <span style="display: inline; line-height: 1.6; color: #d14; background-color: transparent;">unix:</span><span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;">///var/run/docker.sock. Is the docker daemon running?</span>
</div></code></pre>



<h4 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 10.5px; margin-bottom: 10.5px; font-size: 20px; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;"><a name="查看可以提供的安装版本第二种安装方式" style="background: transparent; color: #1980e6; text-decoration: none;"/>查看可以提供的安装版本（第二种安装方式）</h4>

<pre style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; display: block; font-size: .9em; word-wrap: break-word; color: #333; background-color: rgba(102,128,153,0.05); text-align: start; padding: 0; margin: 0 0 1.1em; line-height: 1.6; border: 0; border-radius: 5px; word-break: break-all;"><code style="font-family: 'Source Code Pro',Consolas,monospace; font-size: inherit; background-color: transparent; white-space: pre-wrap; border-radius: 0; color: #333; display: block; overflow-x: auto; background: #f8f8f8; padding: 1.3em 2em;"><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">yum <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">list</span> docker-<span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">ce</span> --showduplicates|<span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">sort</span> -r  
</div></code></pre>



<h4 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 10.5px; margin-bottom: 10.5px; font-size: 20px; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;"><a name="安装指定版本的docker-ce" style="background: transparent; color: #1980e6; text-decoration: none;"/>安装指定版本的Docker-ce</h4>

<pre style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; display: block; font-size: .9em; word-wrap: break-word; color: #333; background-color: rgba(102,128,153,0.05); text-align: start; padding: 0; margin: 0 0 1.1em; line-height: 1.6; border: 0; border-radius: 5px; word-break: break-all;"><code style="font-family: 'Source Code Pro',Consolas,monospace; font-size: inherit; background-color: transparent; white-space: pre-wrap; border-radius: 0; color: #333; display: block; overflow-x: auto; background: #f8f8f8; padding: 1.3em 2em;"><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">yum</span> <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">install</span> <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">docker-ce-17</span><span style="display: inline; line-height: 1.6; background-color: transparent;">.09</span><span style="display: inline; line-height: 1.6; background-color: transparent;">.0</span><span style="display: inline; line-height: 1.6; background-color: transparent;">.ce</span> <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">-y</span>
</div></code></pre>



<h4 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 10.5px; margin-bottom: 10.5px; font-size: 20px; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;"><a name="使用docker-脚本安装docker第三种方式" style="background: transparent; color: #1980e6; text-decoration: none;"/>使用Docker 脚本安装Docker（第三种方式）</h4>



<h5 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 10.5px; margin-bottom: 10.5px; font-size: 16px; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;"><a name="下载docker-安装脚本" style="background: transparent; color: #1980e6; text-decoration: none;"/>下载Docker 安装脚本</h5>

<pre style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; display: block; font-size: .9em; word-wrap: break-word; color: #333; background-color: rgba(102,128,153,0.05); text-align: start; padding: 0; margin: 0 0 1.1em; line-height: 1.6; border: 0; border-radius: 5px; word-break: break-all;"><code style="font-family: 'Source Code Pro',Consolas,monospace; font-size: inherit; background-color: transparent; white-space: pre-wrap; border-radius: 0; color: #333; display: block; overflow-x: auto; background: #f8f8f8; padding: 1.3em 2em;"><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">curl -fsSL <span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">get</span>.docker.<span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">com</span> -<span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">o</span> <span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">get</span>-docker.<span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">sh</span>
</div></code></pre>



<h5 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 10.5px; margin-bottom: 10.5px; font-size: 16px; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;"><a name="执行-docker-脚本使用-aliyun-镜像" style="background: transparent; color: #1980e6; text-decoration: none;"/>执行 Docker 脚本使用 aliyun 镜像</h5>

<pre style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; display: block; font-size: .9em; word-wrap: break-word; color: #333; background-color: rgba(102,128,153,0.05); text-align: start; padding: 0; margin: 0 0 1.1em; line-height: 1.6; border: 0; border-radius: 5px; word-break: break-all;"><code style="font-family: 'Source Code Pro',Consolas,monospace; font-size: inherit; background-color: transparent; white-space: pre-wrap; border-radius: 0; color: #333; display: block; overflow-x: auto; background: #f8f8f8; padding: 1.3em 2em;"><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #d14; background-color: transparent;">sh </span><span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">get-docker.sh</span> <span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">--mirror</span> <span style="display: inline; line-height: 1.6; color: #d14; background-color: transparent;">Aliyun</span>
</div></code></pre>



<h3 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 21px; margin-bottom: 10.5px; font-size: 27.2px; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;"><a name="更换docker-镜像仓库为国内镜像源" style="background: transparent; color: #1980e6; text-decoration: none;"/>更换Docker 镜像仓库为国内镜像源</h3>



<h4 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 10.5px; margin-bottom: 10.5px; font-size: 20px; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;"><a name="注册daocloud账号并登陆daocloud" style="background: transparent; color: #1980e6; text-decoration: none;"/>注册Daocloud账号，并登陆Daocloud</h4>

<pre style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; display: block; font-size: .9em; word-wrap: break-word; color: #333; background-color: rgba(102,128,153,0.05); text-align: start; padding: 0; margin: 0 0 1.1em; line-height: 1.6; border: 0; border-radius: 5px; word-break: break-all;"><code style="font-family: 'Source Code Pro',Consolas,monospace; font-size: inherit; background-color: transparent; white-space: pre-wrap; border-radius: 0; color: #333; display: block; overflow-x: auto; background: #f8f8f8; padding: 1.3em 2em;"><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #990073; background-color: transparent;">https:</span>//www.daocloud.io/mirror<span style="display: inline; line-height: 1.6; color: #999; font-weight: bold; background-color: transparent;">#accelerator-doc</span>
</div></code></pre>



<h4 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 10.5px; margin-bottom: 10.5px; font-size: 20px; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;"><a name="执行更换daocloud-国内镜像源命令" style="background: transparent; color: #1980e6; text-decoration: none;"/>执行更换Daocloud 国内镜像源命令</h4>

<pre style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; display: block; font-size: .9em; word-wrap: break-word; color: #333; background-color: rgba(102,128,153,0.05); text-align: start; padding: 0; margin: 0 0 1.1em; line-height: 1.6; border: 0; border-radius: 5px; word-break: break-all;"><code style="font-family: 'Source Code Pro',Consolas,monospace; font-size: inherit; background-color: transparent; white-space: pre-wrap; border-radius: 0; color: #333; display: block; overflow-x: auto; background: #f8f8f8; padding: 1.3em 2em;"><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">curl -sSL http<span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">s:</span>//<span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">get</span>.daocloud.io/daotools/set_mirror.<span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">sh</span> | <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">sh</span> -s http://e674da1e.<span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">m</span>.daocloud.io
</div></code></pre>



<h4 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 10.5px; margin-bottom: 10.5px; font-size: 20px; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;"><a name="重启docker-使国内源生效" style="background: transparent; color: #1980e6; text-decoration: none;"/>重启Docker 使国内源生效</h4>

<pre style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; display: block; font-size: .9em; word-wrap: break-word; color: #333; background-color: rgba(102,128,153,0.05); text-align: start; padding: 0; margin: 0 0 1.1em; line-height: 1.6; border: 0; border-radius: 5px; word-break: break-all;"><code style="font-family: 'Source Code Pro',Consolas,monospace; font-size: inherit; background-color: transparent; white-space: pre-wrap; border-radius: 0; color: #333; display: block; overflow-x: auto; background: #f8f8f8; padding: 1.3em 2em;"><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #000080; font-weight: normal; background-color: transparent;">systemctl restart docker</span> 
</div></code></pre>



<h4 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 10.5px; margin-bottom: 10.5px; font-size: 20px; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;"><a name="添加docker-为随机启动" style="background: transparent; color: #1980e6; text-decoration: none;"/>添加Docker 为随机启动</h4>

<pre style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; display: block; font-size: .9em; word-wrap: break-word; color: #333; background-color: rgba(102,128,153,0.05); text-align: start; padding: 0; margin: 0 0 1.1em; line-height: 1.6; border: 0; border-radius: 5px; word-break: break-all;"><code style="font-family: 'Source Code Pro',Consolas,monospace; font-size: inherit; background-color: transparent; white-space: pre-wrap; border-radius: 0; color: #333; display: block; overflow-x: auto; background: #f8f8f8; padding: 1.3em 2em;"><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"> systemctl <span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">enable</span> docker 
</div></code></pre>



<h3 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 21px; margin-bottom: 10.5px; font-size: 27.2px; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;"><a name="docker-镜像的基础操作" style="background: transparent; color: #1980e6; text-decoration: none;"/>Docker 镜像的基础操作</h3>



<h5 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 10.5px; margin-bottom: 10.5px; font-size: 16px; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;"><a name="从github-拉取-镜像" style="background: transparent; color: #1980e6; text-decoration: none;"/>从github 拉取 镜像</h5>

<p style="margin: 0 0 1.1em; line-height: 1.6;">命令格式：</p>

<pre style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; display: block; font-size: .9em; word-wrap: break-word; color: #333; background-color: rgba(102,128,153,0.05); text-align: start; padding: 0; margin: 0 0 1.1em; line-height: 1.6; border: 0; border-radius: 5px; word-break: break-all;"><code style="font-family: 'Source Code Pro',Consolas,monospace; font-size: inherit; background-color: transparent; white-space: pre-wrap; border-radius: 0; color: #333; display: block; overflow-x: auto; background: #f8f8f8; padding: 1.3em 2em;"><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">docker pull <span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;">[选项]</span> <span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;">[Docker Registry 地址<span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;">[:端口号]</span>/]</span>仓库名<span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;">[:标签]</span>
</div></code></pre>

<p style="margin: 0 0 1.1em; line-height: 1.6;">Docker 镜像仓库地址：地址的格式一般是 &lt;域名/IP&gt;[:端口号]。默认地址是 Docker Hub。 <br/>
仓库名：两段式名称，即 &lt;用户名&gt;/&lt;软件名&gt;。对于 Docker Hub，如果不给出用户名，则默认为 library，也就是官方镜像。 <br/>
实例：</p>

<pre style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; display: block; font-size: .9em; word-wrap: break-word; color: #333; background-color: rgba(102,128,153,0.05); text-align: start; padding: 0; margin: 0 0 1.1em; line-height: 1.6; border: 0; border-radius: 5px; word-break: break-all;"><code style="font-family: 'Source Code Pro',Consolas,monospace; font-size: inherit; background-color: transparent; white-space: pre-wrap; border-radius: 0; color: #333; display: block; overflow-x: auto; background: #f8f8f8; padding: 1.3em 2em;"><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"> docker pull ubuntu
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><div style="line-height: 1.6;"/>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">Using <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">default</span> <span style="display: inline; line-height: 1.6; color: #d14; background-color: transparent;">tag:</span> latest
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #d14; background-color: transparent;">latest:</span> Pulling from library/ubuntu
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #d14; background-color: transparent;">c64513b74145:</span> Pull complete 
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">01</span><span style="display: inline; line-height: 1.6; color: #d14; background-color: transparent;">b8b12bad90:</span> Pull complete 
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #d14; background-color: transparent;">c5d85cf7a05f:</span> Pull complete 
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #d14; background-color: transparent;">b6b268720157:</span> Pull complete 
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #d14; background-color: transparent;">e12192999ff1:</span> Pull complete 
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #d14; background-color: transparent;">Digest:</span> <span style="display: inline; line-height: 1.6; color: #d14; background-color: transparent;">sha256:</span><span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">8</span>c3cced1211d1a566088c0af049cc8cd6f33f5b275e62e6285ca6a13e66a98f0
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #d14; background-color: transparent;">Status:</span> Downloaded newer image <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">for</span> <span style="display: inline; line-height: 1.6; color: #d14; background-color: transparent;">ubuntu:</span>latest
</div></code></pre>



<h5 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 10.5px; margin-bottom: 10.5px; font-size: 16px; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;"><a name="列出本地已下载的镜像" style="background: transparent; color: #1980e6; text-decoration: none;"/>列出本地已下载的镜像</h5>

<pre style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; display: block; font-size: .9em; word-wrap: break-word; color: #333; background-color: rgba(102,128,153,0.05); text-align: start; padding: 0; margin: 0 0 1.1em; line-height: 1.6; border: 0; border-radius: 5px; word-break: break-all;"><code style="font-family: 'Source Code Pro',Consolas,monospace; font-size: inherit; background-color: transparent; white-space: pre-wrap; border-radius: 0; color: #333; display: block; overflow-x: auto; background: #f8f8f8; padding: 1.3em 2em;"><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">docker image
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><div style="line-height: 1.6;"/>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">ubuntu              latest              <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">735</span>f80812f90        <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">2</span> weeks ago         <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">83.5</span>MB
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">hello-world         latest              <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">2</span>cb0d9787c4d        <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">4</span> weeks ago         <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">1.85</span>kB
</div></code></pre>



<h5 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 10.5px; margin-bottom: 10.5px; font-size: 16px; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;"><a name="删除本地镜像" style="background: transparent; color: #1980e6; text-decoration: none;"/>删除本地镜像</h5>

<pre style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; display: block; font-size: .9em; word-wrap: break-word; color: #333; background-color: rgba(102,128,153,0.05); text-align: start; padding: 0; margin: 0 0 1.1em; line-height: 1.6; border: 0; border-radius: 5px; word-break: break-all;"><code style="font-family: 'Source Code Pro',Consolas,monospace; font-size: inherit; background-color: transparent; white-space: pre-wrap; border-radius: 0; color: #333; display: block; overflow-x: auto; background: #f8f8f8; padding: 1.3em 2em;"><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">docker <span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">image</span> rm -f <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">2</span>cb0d9787c4d
</div></code></pre>

<p style="margin: 0 0 1.1em; line-height: 1.6;">根据镜像 ID、镜像名、摘要删除镜像</p>



<h3 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 21px; margin-bottom: 10.5px; font-size: 27.2px; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;"><a name="使用dockerfile构建自己的镜像" style="background: transparent; color: #1980e6; text-decoration: none;"/>使用Dockerfile构建自己的镜像</h3>



<h4 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 10.5px; margin-bottom: 10.5px; font-size: 20px; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;"><a name="创建一个空白的目录并进入此目录" style="background: transparent; color: #1980e6; text-decoration: none;"/>创建一个空白的目录并进入此目录</h4>

<pre style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; display: block; font-size: .9em; word-wrap: break-word; color: #333; background-color: rgba(102,128,153,0.05); text-align: start; padding: 0; margin: 0 0 1.1em; line-height: 1.6; border: 0; border-radius: 5px; word-break: break-all;"><code style="font-family: 'Source Code Pro',Consolas,monospace; font-size: inherit; background-color: transparent; white-space: pre-wrap; border-radius: 0; color: #333; display: block; overflow-x: auto; background: #f8f8f8; padding: 1.3em 2em;"><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">mkdir</span> <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">first</span> 
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">cd</span> <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">first</span>/
</div></code></pre>



<h4 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 10.5px; margin-bottom: 10.5px; font-size: 20px; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;"><a name="上传定制镜像需要的文件到此目录下" style="background: transparent; color: #1980e6; text-decoration: none;"/>上传定制镜像需要的文件到此目录下</h4>



<pre style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; display: block; font-size: .9em; word-wrap: break-word; color: #333; background-color: rgba(102,128,153,0.05); text-align: start; padding: 0; margin: 0 0 1.1em; line-height: 1.6; border: 0; border-radius: 5px; word-break: break-all;"><code style="font-family: 'Source Code Pro',Consolas,monospace; font-size: inherit; background-color: transparent; white-space: pre-wrap; border-radius: 0; color: #333; display: block; overflow-x: auto; background: #f8f8f8; padding: 1.3em 2em;"><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">[root@MiWiFi-R3-srv ~]<span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;"># cd first/</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">[root@MiWiFi-R3-srv first]<span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;"># ll</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">总用量 12
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">-rw-r--r--.<span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;"> 1 </span>root root<span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;"> 604 </span>8月 <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;"> 11 </span>15:50 Dockerfile
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">-rw-r--r--.<span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;"> 1 </span>root root<span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;"> 230 </span>8月 <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;"> 11 </span>14:57 index.js
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">-rw-r--r--.<span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;"> 1 </span>root root<span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;"> 228 </span>8月 <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;"> 11 </span>14:58 package.json
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">[root@MiWiFi-R3-srv first]<span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;"># </span>
</div></code></pre>



<h4 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 10.5px; margin-bottom: 10.5px; font-size: 20px; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;"><a name="编辑dockerfile文件" style="background: transparent; color: #1980e6; text-decoration: none;"/>编辑Dockerfile文件</h4>



<pre style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; display: block; font-size: .9em; word-wrap: break-word; color: #333; background-color: rgba(102,128,153,0.05); text-align: start; padding: 0; margin: 0 0 1.1em; line-height: 1.6; border: 0; border-radius: 5px; word-break: break-all;"><code style="font-family: 'Source Code Pro',Consolas,monospace; font-size: inherit; background-color: transparent; white-space: pre-wrap; border-radius: 0; color: #333; display: block; overflow-x: auto; background: #f8f8f8; padding: 1.3em 2em;"><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;"># 基础镜像来自于 hub.docker.com</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">FROM</span> centos
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><div style="line-height: 1.6;"/>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;">#镜像维护信息 https://xiaopangsoftware.taobao.com</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">MAINTAINER</span> xiaopangruanjianxuetang
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><div style="line-height: 1.6;"/>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;">#指定工作目录</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">WORKDIR</span><span style="display: inline; line-height: 1.6; background-color: transparent;"> /app</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; background-color: transparent;"/>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;">#将项目相关文件拷贝到app下,如果目录不存在会自动创建</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">COPY</span><span style="display: inline; line-height: 1.6; background-color: transparent;"> index.js /app</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; background-color: transparent;"/><span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">COPY</span><span style="display: inline; line-height: 1.6; background-color: transparent;"> package.json /app</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; background-color: transparent;"/>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;"># 安装命令来自于 nodejs 官网 https://nodejs.org/en/download/package-manager/#enterprise-linux-and-fedora</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">RUN</span><span style="display: inline; line-height: 1.6; background-color: transparent;"> curl --silent --location https://rpm.nodesource.com/setup_10.x | bash - &amp;&amp; yum -y install nodejs &amp;&amp; npm install</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; background-color: transparent;"/>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;">#暴露端口</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">EXPOSE</span> <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">8080</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><div style="line-height: 1.6;"/>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #998; font-style: italic; background-color: transparent;">#容器启动命令</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">CMD</span><span style="display: inline; line-height: 1.6; background-color: transparent;"> [<span style="display: inline; line-height: 1.6; color: #d14; background-color: transparent;">"node"</span>, <span style="display: inline; line-height: 1.6; color: #d14; background-color: transparent;">"/app/index.js"</span>]</span>
</div></code></pre>

<h4 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 10.5px; margin-bottom: 10.5px; font-size: 20px; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;"><a name="构建镜像" style="background: transparent; color: #1980e6; text-decoration: none;"/>构建镜像</h4>

<pre style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; display: block; font-size: .9em; word-wrap: break-word; color: #333; background-color: rgba(102,128,153,0.05); text-align: start; padding: 0; margin: 0 0 1.1em; line-height: 1.6; border: 0; border-radius: 5px; word-break: break-all;"><code style="font-family: 'Source Code Pro',Consolas,monospace; font-size: inherit; background-color: transparent; white-space: pre-wrap; border-radius: 0; color: #333; display: block; overflow-x: auto; background: #f8f8f8; padding: 1.3em 2em;"><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #990073; background-color: transparent;">docker</span> <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">build </span>-t xiaopang/centos-nodejs-<span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">1</span> .
</div></code></pre>

<p style="margin: 0 0 1.1em; line-height: 1.6;"><strong style="font-weight: bold; line-height: 1.6;">-t  你的名字/镜像的名字</strong></p>

<p style="margin: 0 0 1.1em; line-height: 1.6;">构建成功的后半部分 显示结果</p>



<pre style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; display: block; font-size: .9em; word-wrap: break-word; color: #333; background-color: rgba(102,128,153,0.05); text-align: start; padding: 0; margin: 0 0 1.1em; line-height: 1.6; border: 0; border-radius: 5px; word-break: break-all;"><code style="font-family: 'Source Code Pro',Consolas,monospace; font-size: inherit; background-color: transparent; white-space: pre-wrap; border-radius: 0; color: #333; display: block; overflow-x: auto; background: #f8f8f8; padding: 1.3em 2em;"><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">...
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">npm notice created a lockfile <span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">as</span> package-lock.json. You should commit this file.
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">added <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">50</span> packages <span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">in</span> <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">9.583</span>s
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">Removing intermediate container <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">8</span>dc630bdf3fd
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"> ---&gt; f0beb800684a
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">Step</span> <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">7</span>/<span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">8</span> : EXPOSE <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">8080</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"> ---&gt; Running <span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">in</span> f1e679738194
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">Removing intermediate container f1e679738194
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"> ---&gt; <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">3</span>c0c770cd1c2
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">Step</span> <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">8</span>/<span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">8</span> : CMD [<span style="display: inline; line-height: 1.6; color: #d14; background-color: transparent;">"node"</span>, <span style="display: inline; line-height: 1.6; color: #d14; background-color: transparent;">"/app/index.js"</span>]
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"> ---&gt; Running <span style="display: inline; line-height: 1.6; color: #0086b3; background-color: transparent;">in</span> <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">9377</span>ccc41407
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">Removing intermediate container <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">9377</span>ccc41407
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"> ---&gt; cea31fd11519
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">Successfully built cea31fd11519
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">Successfully tagged xiaopang/centos-nodejs<span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">-1</span>:latest
</div></code></pre>



<h4 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 10.5px; margin-bottom: 10.5px; font-size: 20px; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;"><a name="查看构建成功的images" style="background: transparent; color: #1980e6; text-decoration: none;"/>查看构建成功的images</h4>

<pre style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; display: block; font-size: .9em; word-wrap: break-word; color: #333; background-color: rgba(102,128,153,0.05); text-align: start; padding: 0; margin: 0 0 1.1em; line-height: 1.6; border: 0; border-radius: 5px; word-break: break-all;"><code style="font-family: 'Source Code Pro',Consolas,monospace; font-size: inherit; background-color: transparent; white-space: pre-wrap; border-radius: 0; color: #333; display: block; overflow-x: auto; background: #f8f8f8; padding: 1.3em 2em;"><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #000080; font-weight: normal; background-color: transparent;">docker images</span>
</div></code></pre>



<pre style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; display: block; font-size: .9em; word-wrap: break-word; color: #333; background-color: rgba(102,128,153,0.05); text-align: start; padding: 0; margin: 0 0 1.1em; line-height: 1.6; border: 0; border-radius: 5px; word-break: break-all;"><code style="font-family: 'Source Code Pro',Consolas,monospace; font-size: inherit; background-color: transparent; white-space: pre-wrap; border-radius: 0; color: #333; display: block; overflow-x: auto; background: #f8f8f8; padding: 1.3em 2em;"><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">REPOSITORY                 TAG                 IMAGE ID            CREATED             SIZE
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">xiaopang/centos-nodejs<span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">-1</span>   latest              cea31fd11519        <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">7</span> minutes ago       <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">343</span>MB
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">centos                     latest              <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">5182e96772</span>bf        <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">4</span> days ago          <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">200</span>MB
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">ubuntu                     latest              <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">735</span>f80812f90        <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">2</span> weeks ago         <span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">83.5</span>MB
</div></code></pre>



<h4 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 10.5px; margin-bottom: 10.5px; font-size: 20px; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;"><a name="运行新构建的images" style="background: transparent; color: #1980e6; text-decoration: none;"/>运行新构建的images</h4>



<pre style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; display: block; font-size: .9em; word-wrap: break-word; color: #333; background-color: rgba(102,128,153,0.05); text-align: start; padding: 0; margin: 0 0 1.1em; line-height: 1.6; border: 0; border-radius: 5px; word-break: break-all;"><code style="font-family: 'Source Code Pro',Consolas,monospace; font-size: inherit; background-color: transparent; white-space: pre-wrap; border-radius: 0; color: #333; display: block; overflow-x: auto; background: #f8f8f8; padding: 1.3em 2em;"><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">docker <span style="display: inline; line-height: 1.6; color: #333; font-weight: bold; background-color: transparent;">run</span><span style="display: inline; line-height: 1.6; background-color: transparent;"> -p 8080:8080 <span style="display: inline; line-height: 1.6; background-color: transparent;">-d</span> xiaopang/centos-nodejs-1</span>
</div></code></pre>



<h4 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 10.5px; margin-bottom: 10.5px; font-size: 20px; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;"><a name="访问8080验证镜像是否制作成功" style="background: transparent; color: #1980e6; text-decoration: none;"/>访问8080，验证镜像是否制作成功</h4>



<pre style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; display: block; font-size: .9em; word-wrap: break-word; color: #333; background-color: rgba(102,128,153,0.05); text-align: start; padding: 0; margin: 0 0 1.1em; line-height: 1.6; border: 0; border-radius: 5px; word-break: break-all;"><code style="font-family: 'Source Code Pro',Consolas,monospace; font-size: inherit; background-color: transparent; white-space: pre-wrap; border-radius: 0; color: #333; display: block; overflow-x: auto; background: #f8f8f8; padding: 1.3em 2em;"><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #d14; background-color: transparent;">[root@localhost first]</span># curl http://<span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">127.0.0.1:8080</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">Hello World
</div></code></pre>

<p style="margin: 0 0 1.1em; line-height: 1.6;"><strong style="font-weight: bold; line-height: 1.6;">恭喜你镜像制作成功了</strong></p>



<h3 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 21px; margin-bottom: 10.5px; font-size: 27.2px; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;"><a name="遇到的问题" style="background: transparent; color: #1980e6; text-decoration: none;"/>遇到的问题</h3>



<h4 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 10.5px; margin-bottom: 10.5px; font-size: 20px; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;"><a name="1-docker-build-报错warning-ipv4-forwarding-is-disabled-networking-will-not-work" style="background: transparent; color: #1980e6; text-decoration: none;"/>1. docker build 报错[Warning] IPv4 forwarding is disabled. Networking will not work.</h4>

<ol style="margin-top: 0; margin-bottom: 1.1em; line-height: 1.6;"><li style="line-height: 1.6;">编辑00-system.conf <br/>
vim  /usr/lib/sysctl.d/00-system.conf</li>
<li style="line-height: 1.6;">追加以下内容</li>
</ol>

<pre style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; display: block; font-size: .9em; word-wrap: break-word; color: #333; background-color: rgba(102,128,153,0.05); text-align: start; padding: 0; margin: 0 0 1.1em; line-height: 1.6; border: 0; border-radius: 5px; word-break: break-all;"><code style="font-family: 'Source Code Pro',Consolas,monospace; font-size: inherit; background-color: transparent; white-space: pre-wrap; border-radius: 0; color: #333; display: block; overflow-x: auto; background: #f8f8f8; padding: 1.3em 2em;"><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">net<span style="display: inline; line-height: 1.6; background-color: transparent;">.ipv4</span><span style="display: inline; line-height: 1.6; background-color: transparent;">.ip_forward</span>=<span style="display: inline; line-height: 1.6; color: #008080; background-color: transparent;">1</span>
</div></code></pre>

<ol start="3" style="margin-top: 0; margin-bottom: 1.1em; line-height: 1.6;"><li style="line-height: 1.6;">重启网卡服务</li>
</ol>

<pre style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; display: block; font-size: .9em; word-wrap: break-word; color: #333; background-color: rgba(102,128,153,0.05); text-align: start; padding: 0; margin: 0 0 1.1em; line-height: 1.6; border: 0; border-radius: 5px; word-break: break-all;"><code style="font-family: 'Source Code Pro',Consolas,monospace; font-size: inherit; background-color: transparent; white-space: pre-wrap; border-radius: 0; color: #333; display: block; overflow-x: auto; background: #f8f8f8; padding: 1.3em 2em;"><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #000080; font-weight: normal; background-color: transparent;">systemctl restart network</span>
</div></code></pre></div><center style="display:none !important;visibility:collapse !important;height:0 !important;white-space:nowrap;width:100%;overflow:hidden">---%0Alayout%3A%20post%0Atitle%3A%20Docker%20%u7CFB%u5217%u57FA%u7840%u6559%u7A0B%28%u4E8C%29%0Adescription%3A%20Docker%20%u7CFB%u5217%u57FA%u7840%u6559%u7A0B%u4E4BDocker%20%u5B9E%u64CD%uFF0C%u5305%u62ECcentos%20%u5B89%u88C5Docker%uFF0CDocker%20%u955C%u50CF%u7684%u83B7%u53D6%u3001%u5220%u9664%u3001%u67E5%u770B%u3001%u5B9A%u5236%u3001Dockerfile%u5B9A%u5236%u955C%u50CF%0Adate%3A%202018-08-09%2008%3A35%3A38%20+08%3A00%0Atags%3A%20Docker%20%u5B89%u88C5%2CDocker%u955C%u50CF%2CDockerfile%20%u5B9A%u5236%u955C%u50CF%0Acategories%3A%20Docker%0A---%0A%5BTOC%5D%0A%23%23%20Docker%20%u7CFB%u5217%u57FA%u7840%u6559%u7A0B%28%u4E8C%29%0A%0A@%28Docker%29%0A%0A%23%23%23%20CentOs%207%20%u5B89%u88C5%20Docker-ce%20%u793E%u533A%u7248%u672C%0A%23%23%23%23%20%u5B89%u88C5docker%u4F9D%u8D56%u5305%0A%0A%20%20%20%20yum%20install%20-y%20yum-utils%20device-mapper-persistent-data%20lvm2%0A%23%23%23%23%20%u6DFB%u52A0Docker-ce%20%u8F6F%u4EF6%u6E90%0A%0A%20%20%20%20yum-config-manager%20--add-repo%20https%3A//download.docker.com/linux/centos/docker-ce.repo%0A%0A%23%23%23%23%20%u5173%u95EDDocker-ce%20%u7684%u8FB9%u7F18%u7248%u672C%u548C%u6D4B%u8BD5%u7248%u672C%0A%0A%20%20%20%20yum-config-manager%20--enable%20docker-ce-edge%0A%20%20%20%20yum-config-manager%20--enable%20docker-ce-test%0A%23%23%23%23%20%u66F4%u65B0yum%u6E90%0A%0A%20%20%20%20yum%20makecache%20fast%0A%23%23%23%23%20%u5B89%u88C5Docker-ce%uFF08%u7B2C%u4E00%u79CD%u5B89%u88C5%u65B9%u5F0F%uFF09%0A%0A%20%20%20%20yum%20install%20docker-ce%20-y%0A%20%20%20%20%0A%23%23%23%23%20%u67E5%u770B%u662F%u5426%u5B89%u88C5%u6210%u529F%0A%20%0A%0A%20%20%20%20docker%20version%0A%0A%20%20%20%20Client%3A%0A%20%20%20%20Version%3A%20%20%20%20%20%20%20%20%20%20%2018.06.1-ce-rc1%0A%20%20%20%20API%20version%3A%20%20%20%20%20%20%201.38%0A%20%20%20%20Go%20version%3A%20%20%20%20%20%20%20%20go1.10.3%0A%20%20%20%20Git%20commit%3A%20%20%20%20%20%20%20%200928140%0A%20%20%20%20Built%3A%20%20%20%20%20%20%20%20%20%20%20%20%20Wed%20Aug%20%208%2001%3A35%3A58%202018%0A%20%20%20%20OS/Arch%3A%20%20%20%20%20%20%20%20%20%20%20linux/amd64%0A%20%20%20%20Experimental%3A%20%20%20%20%20%20false%0A%20%20%20%20Cannot%20connect%20to%20the%20Docker%20daemon%20at%20unix%3A///var/run/docker.sock.%20Is%20the%20docker%20daemon%20running%3F%0A%23%23%23%23%20%u67E5%u770B%u53EF%u4EE5%u63D0%u4F9B%u7684%u5B89%u88C5%u7248%u672C%uFF08%u7B2C%u4E8C%u79CD%u5B89%u88C5%u65B9%u5F0F%uFF09%0A%20%20%20%20yum%20list%20docker-ce%20--showduplicates%7Csort%20-r%20%20%0A%23%23%23%23%20%u5B89%u88C5%u6307%u5B9A%u7248%u672C%u7684Docker-ce%0A%20%20%20%20yum%20install%20docker-ce-17.09.0.ce%20-y%0A%23%23%23%23%20%u4F7F%u7528Docker%20%u811A%u672C%u5B89%u88C5Docker%uFF08%u7B2C%u4E09%u79CD%u65B9%u5F0F%uFF09%0A%23%23%23%23%23%20%u4E0B%u8F7DDocker%20%u5B89%u88C5%u811A%u672C%0A%20%20%20%20curl%20-fsSL%20get.docker.com%20-o%20get-docker.sh%0A%23%23%23%23%23%20%u6267%u884C%20Docker%20%u811A%u672C%u4F7F%u7528%20aliyun%20%u955C%u50CF%20%0A%09%0A%20%20%20%20sh%20get-docker.sh%20--mirror%20Aliyun%0A%0A%23%23%23%20%u66F4%u6362Docker%20%u955C%u50CF%u4ED3%u5E93%u4E3A%u56FD%u5185%u955C%u50CF%u6E90%0A%23%23%23%23%20%u6CE8%u518CDaocloud%u8D26%u53F7%uFF0C%u5E76%u767B%u9646Daocloud%0A%0A%20%20%20%20https%3A//www.daocloud.io/mirror%23accelerator-doc%0A%0A%23%23%23%23%20%u6267%u884C%u66F4%u6362Daocloud%20%u56FD%u5185%u955C%u50CF%u6E90%u547D%u4EE4%0A%20%20%20%20curl%20-sSL%20https%3A//get.daocloud.io/daotools/set_mirror.sh%20%7C%20sh%20-s%20http%3A//e674da1e.m.daocloud.io%0A%20%20%20%20%0A%23%23%23%23%20%20%u91CD%u542FDocker%20%u4F7F%u56FD%u5185%u6E90%u751F%u6548%20%0A%0A%20%20%20%20systemctl%20restart%20docker%20%0A%23%23%23%23%20%20%u6DFB%u52A0Docker%20%u4E3A%u968F%u673A%u542F%u52A8%0A%0A%20%20%20%20%20systemctl%20enable%20docker%20%0A%0A%23%23%23%20Docker%20%u955C%u50CF%u7684%u57FA%u7840%u64CD%u4F5C%0A%23%23%23%23%23%u4ECEgithub%20%u62C9%u53D6%20%u955C%u50CF%0A%u547D%u4EE4%u683C%u5F0F%uFF1A%0A%0A%20%20%20%20docker%20pull%20%5B%u9009%u9879%5D%20%5BDocker%20Registry%20%u5730%u5740%5B%3A%u7AEF%u53E3%u53F7%5D/%5D%u4ED3%u5E93%u540D%5B%3A%u6807%u7B7E%5D%0ADocker%20%u955C%u50CF%u4ED3%u5E93%u5730%u5740%uFF1A%u5730%u5740%u7684%u683C%u5F0F%u4E00%u822C%u662F%20%3C%u57DF%u540D/IP%3E%5B%3A%u7AEF%u53E3%u53F7%5D%u3002%u9ED8%u8BA4%u5730%u5740%u662F%20Docker%20Hub%u3002%0A%u4ED3%u5E93%u540D%uFF1A%u4E24%u6BB5%u5F0F%u540D%u79F0%uFF0C%u5373%20%3C%u7528%u6237%u540D%3E/%3C%u8F6F%u4EF6%u540D%3E%u3002%u5BF9%u4E8E%20Docker%20Hub%uFF0C%u5982%u679C%u4E0D%u7ED9%u51FA%u7528%u6237%u540D%uFF0C%u5219%u9ED8%u8BA4%u4E3A%20library%uFF0C%u4E5F%u5C31%u662F%u5B98%u65B9%u955C%u50CF%u3002%0A%u5B9E%u4F8B%uFF1A%0A%0A%20%20%20%20%20docker%20pull%20ubuntu%0A%0A%20%20%20%20Using%20default%20tag%3A%20latest%0A%09latest%3A%20Pulling%20from%20library/ubuntu%0A%20%20%20%20c64513b74145%3A%20Pull%20complete%20%0A%20%20%20%2001b8b12bad90%3A%20Pull%20complete%20%0A%09c5d85cf7a05f%3A%20Pull%20complete%20%0A%09b6b268720157%3A%20Pull%20complete%20%0A%09e12192999ff1%3A%20Pull%20complete%20%0A%09Digest%3A%20sha256%3A8c3cced1211d1a566088c0af049cc8cd6f33f5b275e62e6285ca6a13e66a98f0%0A%09Status%3A%20Downloaded%20newer%20image%20for%20ubuntu%3Alatest%0A%23%23%23%23%23%20%u5217%u51FA%u672C%u5730%u5DF2%u4E0B%u8F7D%u7684%u955C%u50CF%0A%0A%20%20%20%20docker%20image%0A%20%20%20%20%0A%20%20%20%20REPOSITORY%20%20%20%20%20%20%20%20%20%20TAG%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20IMAGE%20ID%20%20%20%20%20%20%20%20%20%20%20%20CREATED%20%20%20%20%20%20%20%20%20%20%20%20%20SIZE%0A%09ubuntu%20%20%20%20%20%20%20%20%20%20%20%20%20%20latest%20%20%20%20%20%20%20%20%20%20%20%20%20%20735f80812f90%20%20%20%20%20%20%20%202%20weeks%20ago%20%20%20%20%20%20%20%20%2083.5MB%0A%09hello-world%20%20%20%20%20%20%20%20%20latest%20%20%20%20%20%20%20%20%20%20%20%20%20%202cb0d9787c4d%20%20%20%20%20%20%20%204%20weeks%20ago%20%20%20%20%20%20%20%20%201.85kB%0A%0A%23%23%23%23%23%20%u5220%u9664%u672C%u5730%u955C%u50CF%0A%0A%20%20%20%20docker%20image%20rm%20-f%202cb0d9787c4d%0A%u6839%u636E%u955C%u50CF%20ID%u3001%u955C%u50CF%u540D%u3001%u6458%u8981%u5220%u9664%u955C%u50CF%0A%23%23%23%20%u4F7F%u7528Dockerfile%u6784%u5EFA%u81EA%u5DF1%u7684%u955C%u50CF%0A%23%23%23%23%20%u521B%u5EFA%u4E00%u4E2A%u7A7A%u767D%u7684%u76EE%u5F55%u5E76%u8FDB%u5165%u6B64%u76EE%u5F55%0A%0A%20%20%20%20mkdir%20first%20%0A%20%20%20%20cd%20first/%0A%23%23%23%23%20%u4E0A%u4F20%u5B9A%u5236%u955C%u50CF%u9700%u8981%u7684%u6587%u4EF6%u5230%u6B64%u76EE%u5F55%u4E0B%0A%0A%60%60%60%0A%5Broot@MiWiFi-R3-srv%20%7E%5D%23%20cd%20first/%0A%5Broot@MiWiFi-R3-srv%20first%5D%23%20ll%0A%u603B%u7528%u91CF%2012%0A-rw-r--r--.%201%20root%20root%20604%208%u6708%20%2011%2015%3A50%20Dockerfile%0A-rw-r--r--.%201%20root%20root%20230%208%u6708%20%2011%2014%3A57%20index.js%0A-rw-r--r--.%201%20root%20root%20228%208%u6708%20%2011%2014%3A58%20package.json%0A%5Broot@MiWiFi-R3-srv%20first%5D%23%20%0A%60%60%60%0A%0A%23%23%23%23%20%u7F16%u8F91Dockerfile%u6587%u4EF6%0A%0A%60%60%60%20dockerfile%0A%23%20%u57FA%u7840%u955C%u50CF%u6765%u81EA%u4E8E%20hub.docker.com%0AFROM%20centos%0A%0A%23%u955C%u50CF%u7EF4%u62A4%u4FE1%u606F%20https%3A//xiaopangsoftware.taobao.com%0AMAINTAINER%20xiaopangruanjianxuetang%0A%0A%23%u6307%u5B9A%u5DE5%u4F5C%u76EE%u5F55%0AWORKDIR%20/app%0A%0A%23%u5C06%u9879%u76EE%u76F8%u5173%u6587%u4EF6%u62F7%u8D1D%u5230app%u4E0B%2C%u5982%u679C%u76EE%u5F55%u4E0D%u5B58%u5728%u4F1A%u81EA%u52A8%u521B%u5EFA%0ACOPY%20index.js%20/app%0ACOPY%20package.json%20/app%0A%0A%23%20%u5B89%u88C5%u547D%u4EE4%u6765%u81EA%u4E8E%20nodejs%20%u5B98%u7F51%20https%3A//nodejs.org/en/download/package-manager/%23enterprise-linux-and-fedora%0ARUN%20curl%20--silent%20--location%20https%3A//rpm.nodesource.com/setup_10.x%20%7C%20bash%20-%20%26%26%20yum%20-y%20install%20nodejs%20%26%26%20npm%20install%0A%0A%23%u66B4%u9732%u7AEF%u53E3%0AEXPOSE%208080%0A%0A%23%u5BB9%u5668%u542F%u52A8%u547D%u4EE4%0ACMD%20%5B%22node%22%2C%20%22/app/index.js%22%5D%0A%60%60%60%0A%23%23%23%23%20%u6784%u5EFA%u955C%u50CF%0A%0A%20%20%20%20docker%20build%20-t%20xiaopang/centos-nodejs-1%20.%0A%20%0A%20**-t%20%20%u4F60%u7684%u540D%u5B57/%u955C%u50CF%u7684%u540D%u5B57**%0A%20%0A%u6784%u5EFA%u6210%u529F%u7684%u540E%u534A%u90E8%u5206%20%u663E%u793A%u7ED3%u679C%0A%60%60%60%0A...%0Anpm%20notice%20created%20a%20lockfile%20as%20package-lock.json.%20You%20should%20commit%20this%20file.%0Aadded%2050%20packages%20in%209.583s%0ARemoving%20intermediate%20container%208dc630bdf3fd%0A%20---%3E%20f0beb800684a%0AStep%207/8%20%3A%20EXPOSE%208080%0A%20---%3E%20Running%20in%20f1e679738194%0ARemoving%20intermediate%20container%20f1e679738194%0A%20---%3E%203c0c770cd1c2%0AStep%208/8%20%3A%20CMD%20%5B%22node%22%2C%20%22/app/index.js%22%5D%0A%20---%3E%20Running%20in%209377ccc41407%0ARemoving%20intermediate%20container%209377ccc41407%0A%20---%3E%20cea31fd11519%0ASuccessfully%20built%20cea31fd11519%0ASuccessfully%20tagged%20xiaopang/centos-nodejs-1%3Alatest%0A%60%60%60%0A%0A%23%23%23%23%20%u67E5%u770B%u6784%u5EFA%u6210%u529F%u7684images%0A%0A%20%20%20%20docker%20images%0A%20%20%20%0A%60%60%60%0AREPOSITORY%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20TAG%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20IMAGE%20ID%20%20%20%20%20%20%20%20%20%20%20%20CREATED%20%20%20%20%20%20%20%20%20%20%20%20%20SIZE%0Axiaopang/centos-nodejs-1%20%20%20latest%20%20%20%20%20%20%20%20%20%20%20%20%20%20cea31fd11519%20%20%20%20%20%20%20%207%20minutes%20ago%20%20%20%20%20%20%20343MB%0Acentos%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20latest%20%20%20%20%20%20%20%20%20%20%20%20%20%205182e96772bf%20%20%20%20%20%20%20%204%20days%20ago%20%20%20%20%20%20%20%20%20%20200MB%0Aubuntu%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20latest%20%20%20%20%20%20%20%20%20%20%20%20%20%20735f80812f90%20%20%20%20%20%20%20%202%20weeks%20ago%20%20%20%20%20%20%20%20%2083.5MB%0A%60%60%60%0A%23%23%23%23%20%u8FD0%u884C%u65B0%u6784%u5EFA%u7684images%0A%60%60%60%0Adocker%20run%20-p%208080%3A8080%20-d%20xiaopang/centos-nodejs-1%0A%60%60%60%0A%23%23%23%23%20%u8BBF%u95EE8080%uFF0C%u9A8C%u8BC1%u955C%u50CF%u662F%u5426%u5236%u4F5C%u6210%u529F%0A%0A%60%60%60%0A%5Broot@localhost%20first%5D%23%20curl%20http%3A//127.0.0.1%3A8080%0AHello%20World%0A%60%60%60%0A%0A**%u606D%u559C%u4F60%u955C%u50CF%u5236%u4F5C%u6210%u529F%u4E86**%0A%0A%23%23%23%20%u9047%u5230%u7684%u95EE%u9898%0A%23%23%23%23%201.%20docker%20build%20%u62A5%u9519%5BWarning%5D%20IPv4%20forwarding%20is%20disabled.%20Networking%20will%20not%20work.%0A1.%20%u7F16%u8F9100-system.conf%0A%20%20%20%20vim%20%20/usr/lib/sysctl.d/00-system.conf%0A2.%20%u8FFD%u52A0%u4EE5%u4E0B%u5185%u5BB9%0A%0A%20%20%20%20net.ipv4.ip_forward%3D1%0A3.%20%u91CD%u542F%u7F51%u5361%u670D%u52A1%0A%0A%20%20%20%20systemctl%20restart%20network%0A%0A</center><br/></body></html>